- [Installation](#installation)
- [1. Fork repository](#1-fork-repository)
  - [1.1. Fork main branch](#11-fork-main-branch)
  - [1.2. Enable workflows](#12-enable-workflows)
  - [1.3. Configure workflow permissions](#13-configure-workflow-permissions)
  - [1.4. Run initial workflows](#14-run-initial-workflows)
- [2. Setup Railway for deployment](#2-setup-railway-for-deployment)
  - [2.1. Login to Railway](#21-login-to-railway)
  - [2.2. Create new project](#22-create-new-project)
  - [2.3. Setup MongoDB service](#23-setup-mongodb-service)
  - [2.4. Setup Backend service (Express app)](#24-setup-backend-service-express-app)
  - [2.5. Setup Frontend service (React app)](#25-setup-frontend-service-react-app)

## Installation

1. Clone repo
   ```sh
   git clone https://github.com/brunotot/monorepo-mern-railway-starter.git MY_APP
   ```
2. Enter repo directory
   ```sh
   cd MY_APP
   ```
3. Reinitialize git
   ```sh
   rm -rf .git && git init -b main
   ```

## 1. Fork repository

### 1.1. Fork main branch

Fork main branch by clicking [here](https://github.com/brunotot/monorepo-mern-railway-starter/fork)

- you may customize the repository name and description
- make sure `Copy the main branch only` field is checked

### 1.2. Enable workflows

Go to your personal forked repository and open **Actions** tab.

- click on `I understand my workflows, go ahead and enable them`

### 1.3. Configure workflow permissions

On your personal forked repository, navigate to **Settings -> Actions -> General** and scroll to **Workflow permissions** panel.

- make sure that `Read and write permissions` and `Allow GitHub actions to create and approve pull requests` fields are checked
- save the new configuration

### 1.4. Run initial workflows

Currently, you have only one workflow at your disposal - **typedoc.yml**. There will be more in the nearby future.

- run **typedoc.yml** workflow by navigating to **Actions -> Workflows -> Publish TypeDoc-generated docs** and clicking on `Run workflow` button
- make sure to wait for initial workflows to finish
- once finished, navigate to **Settings -> Pages** and select `gh-pages` branch (which was generated by our Typehttps://railway.app/login

## 2. Setup Railway for deployment

### 2.1. Login to Railway

Login to Railway [here](https://railway.app/login).

### 2.2. Create new project

Create a new project by clicking on `+ New Project` or by clicking on this [link](https://railway.app/new)

- choose `Empty project` from the dropdown

### 2.3. Setup MongoDB service

1. click on `Add a Service`
2. choose `Add MongoDB` from the dropdown
3. wait until MongoDB service finishes deploying
4. open service details
5. select `Data` tab
6. add **production** and **development** databases with the following data:
   - Collection name: `users`
   - Document (json): `{}`
7. after creating databases, delete initial user rows generated by Railway

### 2.4. Setup Backend service (Express app)

1. click on `New` in project dashboard root
2. choose `GitHub Repo`
3. verify GitHub account if prompted
4. choose your forked repository from the dropdown list
5. open the created service and navigate to `Settings` tab
6. under **Build** section, add the custom build command
   - `npm run backend:build`
7. under **Deploy** section, add the custom deploy command
   - `npm run backend:start`
8. under **Variables** tab, add the following environment variables

   - ACCESS_TOKEN_SECRET: accessTokenSecret
   - REFRESH_TOKEN_SECRET: refreshTokenSecret
   - DB_DATABASE: development
   - DB_HOST: [paste url from MongoDB service env variable MONGO_URL]
   - DB_PORT: [paste port from MongoDB service env variable MONGO_PORT]

9. configure custom domain (Optional)
10. deploy app with `Deploy` button at project dashboard root

### 2.5. Setup Frontend service (React app)

1.
